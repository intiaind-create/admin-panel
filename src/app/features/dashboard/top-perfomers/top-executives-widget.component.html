<!-- src/app/features/dashboard/top-perfomers/top-executives-widget.component.html -->

<div class="card h-full">
  <div class="font-semibold text-xl mb-4" i18n>Top Executives</div>
  
  <!-- Loading State -->
  @if (isLoading) {
    <div class="flex justify-center items-center py-8">
      <i class="pi pi-spin pi-spinner" style="font-size: 2rem"></i>
      <span class="ml-3">Loading...</span>
    </div>
  }
  
  <!-- No Permission -->
  @else if (!hasPermission) {
    <div class="text-center py-8">
      <i class="pi pi-lock" style="font-size: 3rem; color: var(--text-color-secondary)"></i>
      <p class="mt-3 mb-0">{{ errorMessage }}</p>
    </div>
  }
  
  <!-- Error State -->
  @else if (errorMessage) {
    <div class="p-message p-message-error">
      <div class="p-message-wrapper">
        <span class="p-message-icon pi pi-times-circle"></span>
        <div class="p-message-detail">{{ errorMessage }}</div>
      </div>
    </div>
  }
  
  <!-- Empty State -->
  @else if (topExecutives.length === 0) {
    <div class="text-center py-8">
      <i class="pi pi-users" style="font-size: 3rem; color: var(--text-color-secondary)"></i>
      <p class="mt-3 mb-0">No executives found</p>
    </div>
  }
  
  <!-- Data -->
  @else {
    <ul class="list-none p-0 m-0">
      @for (executive of topExecutives; track executive._id) {
        <li class="flex items-center justify-between mb-4 pb-4 border-bottom">
          <div class="inline-flex items-center">
            <p-avatar 
              [label]="executive.name.substring(0, 2).toUpperCase()" 
              size="large" 
              shape="circle" 
              styleClass="mr-3"
            ></p-avatar>
            <div>
              <div class="font-medium text-lg">{{ executive.name }}</div>
              <div class="text-sm text-color-secondary">{{ executive.employeeId }}</div>
            </div>
          </div>
          <div class="mt-2 md:mt-0 ml-auto">
            <div class="bg-primary-100 dark:bg-primary-900/50 text-primary-600 dark:text-primary-300 font-semibold p-2 rounded-md text-center w-24">
              {{ executive.completedTasks }} Tasks
            </div>
            <div class="text-xs text-center mt-1 text-color-secondary">
              {{ executive.completionRate }}% rate
            </div>
          </div>
        </li>
      }
    </ul>
  }
</div>
